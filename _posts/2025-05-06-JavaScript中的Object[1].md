---
title: 'JavsScriptä¸­çš„Object (ä¸€)'
date: 2025-05-06
permalink: /posts/jsobj1/
tags:
  - JavaScript
  - é¢è¯•é¢˜
---
> ä¸ºJavaScriptçš„é¢å‘å¯¹è±¡è®¾è®¡ä¸Žä¼ ç»Ÿç±»é©±åŠ¨è¯­è¨€ï¼ˆå¦‚Javaã€C#ï¼‰æœ‰ç€æœ¬è´¨çš„ä¸åŒã€‚
> è¿™ç§å·®å¼‚ä¸ä»…å¡‘é€ äº†JSç‹¬ç‰¹çš„è¯­æ³•é£Žæ ¼å’Œè¯­è¨€ç‰¹æ€§ï¼Œæ›´å½±å“äº†å¼€å‘è€…å¯¹å¯¹è±¡ã€ç»§æ‰¿å’Œå¤ç”¨çš„ç†è§£ã€‚
> æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨JavaScriptä¸­çš„Objectï¼Œè§£æžå…¶æ ¸å¿ƒç‰¹æ€§ä¸Žå¸¸è§é—®é¢˜ã€‚



----



- JSæ˜¯å¦æ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Ÿ
- åŽŸåž‹ã€åŽŸåž‹é“¾æ˜¯ä»€ä¹ˆï¼ŸåŽŸåž‹ç»§æ‰¿å’Œç±»ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- Objectæœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ
- Objectçš„æœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿå¦‚ä½•åˆ¤æ–­Objectæ˜¯å¦ä¸ºç©ºï¼Ÿ
- å¦‚ä½•éåŽ†å¯¹è±¡ï¼ŸReflect.ownKeys()å’ŒObject.keys()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- 
> é‡åˆ°è¿™äº›é—®é¢˜æ—¶ï¼Œ æˆ‘ä»¬å¸¸å¸¸ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼Œå› ä¸ºJavaScriptçš„é¢å‘å¯¹è±¡è®¾è®¡ä¸Žä¼ ç»Ÿç±»é©±åŠ¨è¯­è¨€ï¼ˆå¦‚Javaã€C#ï¼‰æœ‰ç€æœ¬è´¨çš„ä¸åŒã€‚
> è¿™ç§å·®å¼‚ä¸ä»…å¡‘é€ äº†JSç‹¬ç‰¹çš„è¯­æ³•é£Žæ ¼å’Œè¯­è¨€ç‰¹æ€§ï¼Œæ›´å½±å“äº†å¼€å‘è€…å¯¹å¯¹è±¡ã€ç»§æ‰¿å’Œå¤ç”¨çš„ç†è§£ã€‚
> æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨JavaScriptä¸­çš„Objectï¼Œè§£æžå…¶æ ¸å¿ƒç‰¹æ€§ä¸Žå¸¸è§é—®é¢˜ã€‚

---

## ä¸€ã€JSçš„è®¾è®¡å“²å­¦ï¼šæ— ç±»è€Œæœ‰åº

> æ—©æœŸ(ES6ä¹‹å‰)çš„JavaScriptéƒ½æ²¡æœ‰`Class`å…³é”®å­—ï¼Œåªæœ‰å¯¹è±¡å’Œå‡½æ•°çš„æ¦‚å¿µã€‚  
> ç›¸æ¯”äºŽJava,C#, JSå¯¹è±¡ä¸ºä»€ä¹ˆå¯ä»¥åŠ¨æ€ç”šè‡³éšæ„åœ°æ·»åŠ å±žæ€§å’Œæ–¹æ³•ï¼Ÿ

  

ç®€è€Œè¨€ä¹‹åœ°è¯´ï¼šJavaScriptæ˜¯**åŸºäºŽå¯¹è±¡**è€Œéžä¼ ç»Ÿç±»é©±åŠ¨çš„é¢å‘å¯¹è±¡è¯­è¨€   
ä»€ä¹ˆæ˜¯åŸºäºŽå¯¹è±¡ï¼Ÿä¸ºä½•å¦‚æ­¤è®¾è®¡ï¼Ÿ  
[åšå®¢](http://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html)å¯¹JSçš„è®¾è®¡ç†å¿µè¿›è¡Œäº†è¯¦ç»†è®²è¿°ï¼Œè¿™é‡Œè¿›è¡Œç®€å•æ¦‚æ‹¬ï¼š

### ðŸ“‘ JavaScript çš„åˆ›å»ºå²
---
   
1994å¹´ï¼Œ`Netscape Navigator`ç½‘ç»œæµè§ˆå™¨çš„å‡ºçŽ°è½°åŠ¨ä¸€æ—¶ï¼Œä½†å½“æ—¶çš„æµè§ˆå™¨åŠŸèƒ½å•ä¸€ï¼ŒçœŸå°±æ˜¯åä¹‰ä¸Šçš„**â€œæµè§ˆå™¨â€**ï¼Œä¸å…·å¤‡äº¤äº’æ€§ã€‚   
å› æ­¤ï¼Œè¿«åˆ‡éœ€è¦ä¸€ç§è½»é‡çº§çš„è„šæœ¬è¯­è¨€æ¥å¢žå¼ºæµè§ˆå™¨çš„äº¤äº’èƒ½åŠ›ã€‚   

---

å½“æ—¶ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰å·²ç»æˆä¸ºä¸€ç§æµè¡Œçš„ç¼–ç¨‹èŒƒå¼ï¼ŒJSçš„è®¾è®¡è€…Brendan Eichä¹Ÿå—å…¶å½±å“ï¼Œå¸Œæœ›å€Ÿé‰´OOPçš„ä¼˜ç‚¹ï¼Œä½†åˆä¸æƒ³è®©JSå˜å¾—è¿‡äºŽå¤æ‚ã€‚

---

C++ ç”¨newå…³é”®å­—åˆ›å»ºå¯¹è±¡ï¼Œ JSåŒæ ·é‡‡ç”¨newå…³é”®å­—åŸºäºŽ**æž„é€ å‡½æ•°**åˆ›é€ å¯¹è±¡ã€‚  
  
ä½†æŠ›å¼ƒäº†ç±»çš„æ¦‚å¿µåŽï¼Œ ä¸¤ä¸ªå®žä¾‹æ— æ³•å…±äº«å±žæ€§å’Œæ–¹æ³•ï¼Œ å˜æˆäº†ä¸¤ä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚

```js
ã€€ã€€function DOG(name){
ã€€ã€€ã€€ã€€this.name = name;
ã€€ã€€ã€€ã€€this.species = 'çŠ¬ç§‘';
ã€€ã€€}
ã€€ã€€let dogA = new DOG('å¤§æ¯›');
ã€€ã€€let dogB = new DOG('äºŒæ¯›');
    // ä¸¤ä¸¤ç‹¬ç«‹çš„å¯¹è±¡ï¼Œæ— æ³•å…±äº«å±žæ€§å’Œæ–¹æ³•ï¼Œ æ›´æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±žæ€§ï¼Œå¦ä¸€ä¸ªå¯¹è±¡ä¸ä¼šå—åˆ°å½±å“ã€‚

ã€€ã€€dogA.species = 'çŒ«ç§‘';
    log(dogB.species); // æ˜¾ç¤º"çŠ¬ç§‘"ï¼Œä¸å—dogAçš„å½±å“
```

---

å› æ­¤ï¼ŒJSè®¾è®¡è€…å†³å®šå¼•å…¥**åŽŸåž‹** `prototype`æ¥å®žçŽ°å¯¹è±¡å±žæ€§å’Œæ–¹æ³•çš„å¤ç”¨ã€‚
```js
ã€€ã€€function DOG(name){
ã€€ã€€ã€€ã€€this.name = name;
ã€€ã€€}

ã€€ã€€DOG.prototype = { species : 'çŠ¬ç§‘' };

ã€€ã€€var dogA = new DOG('å¤§æ¯›');
ã€€ã€€var dogB = new DOG('äºŒæ¯›');

ã€€ã€€DOG.prototype.species = 'çŒ«ç§‘';

ã€€ã€€log(dogA.species); // çŒ«ç§‘
ã€€ã€€log(dogB.species); // çŒ«ç§‘

```
---

æœ€ç»ˆï¼ŒJSæ”¯æŒå°è£…ã€ç»§æ‰¿ã€å¤šæ€, ES6ä¹Ÿå¸¦æ¥äº†Classå…³é”®å­—ï¼Œæ ¸å¿ƒæœºåˆ¶ä¾ç„¶æ˜¯**åŽŸåž‹é“¾**ã€‚ä¾‹å¦‚ï¼š  


```javascript

// æž„é€ å‡½æ•°æ–¹å¼åˆ›å»ºå¯¹è±¡
function Person(name) { this.name = name; }  
Person.prototype.say = function() { console.log(this.name); };
const p1 = new Person("Alice");

// es6 
class Person {  
  constructor(name) { this.name = name; }  
  say() { console.log(this.name); }  
}
const p2 = new Person("Alice");

```

---


## äºŒã€åŽŸåž‹ä¸ŽåŽŸåž‹é“¾ï¼šJSçš„ç»§æ‰¿åŸºçŸ³

### 1. åŽŸåž‹çš„æœ¬è´¨

åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œ**ç»§æ‰¿**æ˜¯æŒ‡å°†ç‰¹æ€§ä»Žçˆ¶ä»£ä¼ é€’ç»™å­ä»£ï¼Œä»¥ä¾¿æ–°ä»£ç å¯ä»¥é‡ç”¨å¹¶åŸºäºŽçŽ°æœ‰ä»£ç çš„ç‰¹æ€§è¿›è¡Œæž„å»ºã€‚      
JavaScript ä½¿ç”¨åŽŸåž‹é“¾æœºåˆ¶å®žçŽ°ç»§æ‰¿ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€æ¡é“¾æŽ¥åˆ°å¦åŽŸåž‹å¯¹è±¡çš„å†…éƒ¨é“¾ã€‚é€šè¿‡`__proto__`æˆ–`Object.getPrototypeOf()`è®¿é—®ã€‚   
è¯¥åŽŸåž‹å¯¹è±¡æœ‰è‡ªå·±çš„åŽŸåž‹ï¼Œä¾æ­¤ç±»æŽ¨ï¼Œç›´åˆ°åŽŸåž‹ä¸º `null` çš„å¯¹è±¡ï¼Œ`null` æ²¡æœ‰åŽŸåž‹ï¼Œæ˜¯åŽŸåž‹é“¾ä¸­æœ€åŽçš„ä¸€çŽ¯ã€‚   


```javascript
const arr = [1,2,3];  
console.log(arr.map); // ç»§æ‰¿è‡ªArray.prototype çš„ mapæ–¹æ³•

const x = "hello world"
console.log(x.split(" ")); // ç»§æ‰¿è‡ªString.prototype çš„ splitæ–¹æ³•
```

### 2. å‡½æ•°çš„åŽŸåž‹ VS å¯¹è±¡çš„åŽŸåž‹

**å‡½æ•°çš„åŽŸåž‹** å’Œ **å¯¹è±¡çš„åŽŸåž‹** æ˜¯åŽŸåž‹é“¾æœºåˆ¶çš„æ ¸å¿ƒã€‚  
ä¸Šæ–‡æåˆ°ï¼ŒJSç”¨newåˆ›å»ºå¯¹è±¡æ—¶ï¼ŒåŸºäºŽæž„é€ å‡½æ•°è€Œä¸æ˜¯ç±»ï¼ŒJSä¸­çš„å‡½æ•°å…·æœ‰`prototype`å±žæ€§
ç›´ç™½åœ°è¯´ï¼Œå½“é‡‡ç”¨ä¸€ä¸ªå‡½æ•°åˆ›é€ å¯¹è±¡æ—¶ï¼Œå°±æ˜¯æŠŠè¯¥å‡½æ•°çš„prototypeç»™æŒ‚åˆ°å¯¹è±¡çš„__proto__ä¸Š

---

#### 01. å‡½æ•°çš„åŽŸåž‹ï¼ˆ`Function.prototype` å’Œ `fn.prototype`ï¼‰

1. æ¯ä¸ªå‡½æ•°ï¼ˆåŒ…æ‹¬æž„é€ å‡½æ•°ï¼‰éƒ½æœ‰ä¸€ä¸ª `prototype` å±žæ€§

   * è¿™ä¸ª `prototype` æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šè¢«ç”¨ä½œç”±è¯¥å‡½æ•°åˆ›å»ºçš„å¯¹è±¡çš„åŽŸåž‹ã€‚
   * å³ï¼š

     ```js
     function Person() {}
     let p = new Person();
     console.log(p.__proto__ === Person.prototype); // true
     ```

2. **`Function.prototype` æ˜¯æ‰€æœ‰å‡½æ•°çš„åŽŸåž‹å¯¹è±¡**

   * æ‰€æœ‰å‡½æ•°æœ¬èº«ï¼ˆåŒ…æ‹¬ä½ è‡ªå®šä¹‰çš„ï¼‰éƒ½æ˜¯ `Function` çš„å®žä¾‹ï¼š

     ```js
     console.log(Person.__proto__ === Function.prototype); // true
     ```

---

#### 02. å¯¹è±¡çš„åŽŸåž‹ï¼ˆ`__proto__`ï¼‰


`Object.getPrototypeOf(person) === person.__proto__ // true`


1. **æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªéšè—å±žæ€§ `__proto__`ï¼ˆæ ‡å‡†å« `[[Prototype]]`ï¼‰**

   * å®ƒæŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æž„é€ å‡½æ•°çš„ `prototype` å±žæ€§ï¼š

     ```js
     let obj = {};
     console.log(obj.__proto__ === Object.prototype); // true
     ```

2. **åŽŸåž‹é“¾æŸ¥æ‰¾æœºåˆ¶**

   * JS åœ¨æŸ¥æ‰¾å±žæ€§æˆ–æ–¹æ³•æ—¶ä¼šæ²¿ `__proto__` ä¸€å±‚å±‚å¾€ä¸Šæ‰¾ï¼Œç›´åˆ° `null` ä¸ºæ­¢ã€‚
   * è¿™æž„æˆäº†**åŽŸåž‹é“¾**ï¼Œä¾‹å¦‚ï¼š

     ```js
     // 1
     person.__proto__ === Person.prototype  // true

     // 2
     Person.prototype.__proto__ === Object.prototype  // true

     // 3
     Object.prototype.__proto__ === null  // true
     ```

    * å¦‚æžœæˆ‘ä»¬ç®€å•æ¨¡æ‹Ÿä¸€ä¸‹jså¼•æ“ŽæŸ¥æ‰¾å¯¹è±¡çš„å±žæ€§çš„è¿‡ç¨‹ï¼š

     ```js
        function getProperty(obj, propName) {
            // åœ¨å¯¹è±¡æœ¬èº«æŸ¥æ‰¾
            if (obj.hasOwnProperty(propName)) {
                return obj[propName]
            } else if (obj.__proto__ !== null) {
            // å¦‚æžœå¯¹è±¡æœ‰åŽŸåž‹ï¼Œåˆ™åœ¨åŽŸåž‹ä¸Š!é€’å½’!æŸ¥æ‰¾
                return getProperty(obj.__proto__, propName)
            } else {
            // ç›´åˆ°æ‰¾åˆ°Object.prototypeï¼ŒObject.prototype.__proto__ä¸ºnullï¼Œè¿”å›žundefined
                return undefined
            }
        }
     ```

---

#### 03. åŒºåˆ«ä¸Žè”ç³»

| å¯¹è±¡/å‡½æ•°  | `.prototype` | `.__proto__`          |
| ------ | ------------ | --------------------- |
| æ™®é€šå¯¹è±¡   | æ—            | æŒ‡å‘å…¶æž„é€ å‡½æ•°çš„ prototype    |
| å‡½æ•°     | **æœ‰**            | æŒ‡å‘ Function.prototype |
| æž„é€ å‡½æ•°å®žä¾‹ | æ—             | æŒ‡å‘æž„é€ å‡½æ•°çš„ prototype     |

---


## ä¸‰ã€Objectçš„å¸¸ç”¨æ–¹æ³•ä¸Žå±žæ€§ç‰¹æ€§
### 1. æ ¸å¿ƒæ“ä½œæ–¹æ³•

| æ–¹æ³•                                | åŠŸèƒ½                     | åœºæ™¯                   |
| ----------------------------------- | ----------------------   | -------------------- |
| `Object.keys(obj)`                  | èŽ·å–å¯æžšä¸¾å­—ç¬¦ä¸²é”®æ•°ç»„     | éåŽ†å±žæ€§ã€åˆ¤æ–­ç©ºå¯¹è±¡   |
| `Object.values(obj)`                | èŽ·å–å±žæ€§å€¼æ•°ç»„            | æ•°æ®å¤„ç†               |
| `Object.entries(obj)`               | è¿”å›ž`[key, value]`æ•°ç»„    | Mapè½¬æ¢              |
| `Object.assign(target, ...sources)` | æµ…æ‹·è´å±žæ€§                | åˆå¹¶é…ç½®               |
| `Object.create(proto)`              | åˆ›å»ºæŒ‡å®šåŽŸåž‹çš„å¯¹è±¡         | åŽŸåž‹ç»§æ‰¿             |


### 2. å±žæ€§ç±»åž‹ä¸ŽæŽ§åˆ¶
JSå±žæ€§åˆ†ä¸º**æ•°æ®å±žæ€§**å’Œ**è®¿é—®å™¨å±žæ€§**ï¼Œå¯é€šè¿‡`Object.defineProperty`é…ç½®ï¼š  
```javascript
    Object.defineProperty(obj, 'age', {  
    writable: false, // ä¸å¯ä¿®æ”¹  
    configurable: false, // ä¸å¯åˆ é™¤  
    enumerable: false, // ä¸å¯éåŽ†  
    value: 25  
    });  
```
åˆ¤æ–­ç©ºå¯¹è±¡ï¼š  
```javascript
// function isEmpty(obj) {  
//   return Object.keys(obj).length === 0; // ä¾èµ–  
// }  

function isEmpty(obj) {  
    return Reflect.ownKeys(obj).length === 0;
}
```

---

> å‚è€ƒèµ„æ–™ï¼š
> [å½»åº•æžæ‡‚JSåŽŸåž‹ä¸ŽåŽŸåž‹é“¾](https://segmentfault.com/a/1190000042725370)      
> [MDN-ç»§æ‰¿ä¸ŽåŽŸåž‹é“¾](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain)